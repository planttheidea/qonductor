!(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("waddup")):"function"==typeof define&&define.amd?define("Qonductor",["waddup"],e):"object"==typeof exports?exports.Qonductor=e(require("waddup")):t.Qonductor=e(t.waddup)})(this,(function(t){return (function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)})([(function(t,e,n){"use strict";e.__esModule=!0;e.DEFAULTS={autoStart:!0,keepHistory:!0,maxConcurrency:10,type:"fifo"},e.STATUSES={CANCELLED:"CANCELLED",COMPLETED:"COMPLETED",FAILED:"FAILED",PENDING:"PENDING",RUNNING:"RUNNING"},e.TYPES={FIFO:"fifo",LIFO:"lifo",SIRO:"siro"}}),(function(t,e,n){function r(t){if(!i(t))return!1;var e=o(t);return e==s||e==c||e==u||e==a}var o=n(2),i=n(11),u="[object AsyncFunction]",s="[object Function]",c="[object GeneratorFunction]",a="[object Proxy]";t.exports=r}),(function(t,e,n){function r(t){return null==t?void 0===t?c:s:a&&a in Object(t)?i(t):u(t)}var o=n(3),i=n(9),u=n(10),s="[object Null]",c="[object Undefined]",a=o?o.toStringTag:void 0;t.exports=r}),(function(t,e,n){var r=n(6),o=r.Symbol;t.exports=o}),(function(t,e,n){t.exports=n(5)}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(1),c=r(s),a=n(12),f=r(a),l=n(16),p=r(l),h=n(0),d=n(21),y=(function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.completed={},this.completedCount=0,this.currentIndex=0,this.isRunning=!1,this.pending={},this.pendingCount=0,this.queue={},this.running={},this.runningCount=0;var r=u({},(0,d.getDefaults)(),n),s=r.type,c=o(r,["type"]);Object.keys(c).forEach((function(t){e[t]=c[t]})),this.type=s.toLowerCase()}return t.prototype._addQueueItemCancel=function(t){return function(e){t.status!==h.STATUSES.PENDING&&t.status!==h.STATUSES.RUNNING||t._publishCancellation(e)}},t.prototype._complete=function(t,e){if(this.completed[t]||(this.keepHistory&&(this.completed[t]=e),this.completedCount++),this.running[t]?(delete this.running[t],this.runningCount--):this.pending[t]&&(delete this.pending[t],this.pendingCount--),delete this.queue[t],this.isRunning&&this.pendingCount)return this._runQueue();this.runningCount||this.pendingCount||(this.isRunning=!1)},t.prototype._getNextIndex=function(t,e){if(!t.length)return-1;switch(e){case h.TYPES.LIFO:return Math.max.apply(this,t);case h.TYPES.SIRO:return t[Math.floor(Math.random()*t.length)];default:return Math.min.apply(this,t)}},t.prototype._runQueue=function(){for(var t=this.runningCount;++t<=this.maxConcurrency;){var e=this._getNextIndex(Object.keys(this.pending),this.type);if(-1===e)break;var n=this.pending[e];this.running[e]=n,this.runningCount++,delete this.pending[e],this.pendingCount--,n.run()}},t.setDefaults=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(0,f.default)(t))throw new SyntaxError("Defaults assignment must be passed an object.");return(0,d.setDefaults)(t)},t.prototype.add=function(t,e){var n=this.currentIndex,r=(0,c.default)(t)?n:t,o=e||t,i=new p.default(r,o,this._complete.bind(this));return this.queue[n]=i,this.currentIndex++,this.pending[n]=i,this.pendingCount++,i.promise.cancel=this._addQueueItemCancel(i),this.autoStart&&!this.isRunning&&this.start(),i.promise},t.prototype.clear=function(){var t=this;Object.keys(this.queue).forEach((function(e){t.queue[e].status!==h.STATUSES.COMPLETED&&t.queue[e].promise.cancel()}))},t.prototype.start=function(){this.isRunning||(this.isRunning=!0,this._runQueue())},t.prototype.stop=function(){this.isRunning=!1},t})();y.getDefaults=d.getDefaults,y.resetDefaults=d.resetDefaults,e.default=y}),(function(t,e,n){var r=n(7),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i}),(function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,n(8))}),(function(t,e){var n;n=(function(){return this})();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n}),(function(t,e,n){function r(t){var e=u.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=s.call(t);return r&&(e?t[c]=n:delete t[c]),o}var o=n(3),i=Object.prototype,u=i.hasOwnProperty,s=i.toString,c=o?o.toStringTag:void 0;t.exports=r}),(function(t,e){function n(t){return o.call(t)}var r=Object.prototype,o=r.toString;t.exports=n}),(function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n}),(function(t,e,n){function r(t){if(!u(t)||o(t)!=s)return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&f.call(n)==p}var o=n(2),i=n(13),u=n(15),s="[object Object]",c=Function.prototype,a=Object.prototype,f=c.toString,l=a.hasOwnProperty,p=f.call(Object);t.exports=r}),(function(t,e,n){var r=n(14),o=r(Object.getPrototypeOf,Object);t.exports=o}),(function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n}),(function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n}),(function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(1),u=r(i),s=n(17),c=n(18),a=r(c),f=n(0),l=n(20),p=(function(){function t(e,n,r){o(this,t),this.cancelId=null,this.isCancelled=!1,this.promiseId=null,this.status=f.STATUSES.PENDING,this.id=e,this.promise=this._createPromiseWrapper(n,(0,l.getOnSuccess)(this,r),(0,l.getOnFail)(this,r))}return t.prototype._cancelPromise=function(t,e){this.status=f.STATUSES.CANCELLED,t(new a.default(e,f.STATUSES.CANCELLED))},t.prototype._createPromiseWrapper=function(t,e,n){var r=this,o=(0,u.default)(t)?t:function(e){return e(t)};return new Promise(function(t,e){var n=(0,l.getDone)(r._resolvePromise(t),r._rejectPromise(e));r.cancelId=(0,s.subscribe)(f.STATUSES.CANCELLED,(function(t){var n=t.data;n.id===r.id&&(r.isCancelled=!0,r._cancelPromise(e,n.message))})),r.promiseId=(0,s.subscribe)(f.STATUSES.RUNNING,(function(t){t.data.id===r.id&&(o(n),(0,s.unsubscribe)(r.promiseId))}))}).then(this._getUnsubscribeOnResolve()).catch(this._getUnsubscribeOnReject()).then(e).catch(n)},t.prototype._getUnsubscribeOnReject=function(){var t=this;return function(e){return(0,s.unsubscribe)(t.cancelId),Promise.reject(e)}},t.prototype._getUnsubscribeOnResolve=function(){var t=this;return function(e){return(0,s.unsubscribe)(t.cancelId),e}},t.prototype._publishCancellation=function(t){(0,s.publish)(f.STATUSES.CANCELLED,{id:this.id,message:t})},t.prototype._rejectPromise=function(t){var e=this;return function(n){e.isCancelled||(e.status=f.STATUSES.FAILED,t(new a.default(n)))}},t.prototype._resolvePromise=function(t){var e=this;return function(n){e.isCancelled||(e.status=f.STATUSES.COMPLETED,t(n))}},t.prototype.run=function(){this.status=f.STATUSES.RUNNING,(0,s.publish)(f.STATUSES.RUNNING,{id:this.id,message:this.id+" resolved successfully."})},t})();e.default=p}),(function(e,n){e.exports=t}),(function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(19),s=(function(t){return t&&t.__esModule?t:{default:t}})(u),c=n(0),a=(function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.STATUSES.FAILED;return r(this,e),o(this,t.call(this,"Queue promise was rejected with status "+i+(n?": ":".")+n))}return i(e,t),e})(s.default);e.default=a}),(function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=(function(t){function e(n){r(this,e);var i=o(this,t.call(this));return Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(i,i.constructor):Object.defineProperty(i,"stack",{value:(new Error).stack}),Object.defineProperty(i,"message",{value:n}),i}return i(e,t),e})(Error);e.default=u}),(function(t,e,n){"use strict";e.__esModule=!0;e.getDone=function(t,e){return function(n,r){return r?e(r):t(n)}},e.getOnFail=function(t,e){return function(n){return e(t.id,t),Promise.reject(n)}},e.getOnSuccess=function(t,e){return function(n){return e(t.id,t),n}}}),(function(t,e,n){"use strict";e.__esModule=!0,e.setDefaults=e.resetDefaults=e.getDefaults=e.currentDefaults=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(0),i=e.currentDefaults=r({},o.DEFAULTS);e.getDefaults=function(){return i},e.resetDefaults=function(){return e.currentDefaults=i=r({},o.DEFAULTS),i},e.setDefaults=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).reduce((function(e,n){return o.DEFAULTS.hasOwnProperty(n)&&(e[n]=t[n]),e}),i)}})])}));