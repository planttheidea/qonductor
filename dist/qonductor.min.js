var Qonductor=function(e){function t(r){if(n[r])return n[r].exports;var u=n[r]={exports:{},id:r,loaded:!1};return e[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),o=n(3),a=n(4),c=r(a),l=n(7),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e);var n=(0,o.getDefaults)(),r=n.autoStart,i=n.keepHistory,s=n.maxConcurrency,a=n.type,c=t.autoStart,l=void 0===c?r:c,f=t.keepHistory,p=void 0===f?i:f,h=t.maxConcurrency,d=void 0===h?s:h,v=t.type,y=void 0===v?a:v;Object.assign(this,{autoStart:l,completed:{},completedCount:0,currentIndex:0,keepHistory:p,isRunning:!1,maxConcurrency:d,pending:{},pendingCount:0,queue:{},running:{},runningCount:0,type:y.toLowerCase()})}return i(e,[{key:"_addQueueItemCancel",value:function(e){return function(t){e.status!==s.statuses.PENDING&&e.status!==s.statuses.RUNNING||e._publishCancellation(t)}}},{key:"_complete",value:function(e,t){this.completed[e]||(this.keepHistory&&(this.completed[e]=t),this.completedCount++),this.running[e]?(delete this.running[e],this.runningCount--):this.pending[e]&&(delete this.pending[e],this.pendingCount--),delete this.queue[e],this.isRunning&&this.pendingCount?this._runQueue():this.runningCount||this.pendingCount||(this.isRunning=!1)}},{key:"_getNextIndex",value:function(e,t){if(!e.length)return-1;switch(t){case s.types.LIFO:return Math.max.apply(this,e);case s.types.SIRO:return e[Math.floor(Math.random()*e.length)];default:return Math.min.apply(this,e)}}},{key:"_runQueue",value:function(){for(var e=this.runningCount;++e<=this.maxConcurrency;){var t=this._getNextIndex(Object.keys(this.pending),this.type);if(t===-1)break;var n=this.pending[t];this.running[t]=n,this.runningCount++,delete this.pending[t],this.pendingCount--,n.run()}}},{key:"add",value:function(e){var t=this.currentIndex,n=new c.default(t,e,this._complete.bind(this));return this.queue[t]=n,this.currentIndex++,this.pending[t]=n,this.pendingCount++,n.promise.cancel=this._addQueueItemCancel(n),this.autoStart&&!this.isRunning&&this.start(),n.promise}},{key:"clear",value:function(){var e=this;Object.keys(this.queue).forEach(function(t){e.queue[t].status!==s.statuses.COMPLETED&&e.queue[t].promise.cancel()})}},{key:"start",value:function(){this.isRunning||(this.isRunning=!0,this._runQueue())}},{key:"stop",value:function(){this.isRunning=!1}}],[{key:"getDefaults",value:function(){return(0,o.getDefaults)()}},{key:"resetDefaults",value:function(){return(0,o.resetDefaults)()}},{key:"setDefaults",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(0,l.isObject)(e))throw new SyntaxError("Defaults assignment must be passed an object.");return(0,o.setDefaults)(e)}}]),e}();t.default=f,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={CANCELLED:"CANCELLED",COMPLETED:"COMPLETED",FAILED:"FAILED",PENDING:"PENDING",RUNNING:"RUNNING"},r={FIFO:"fifo",LIFO:"lifo",SIRO:"siro"};t.statuses=n,t.types=r,t.default={statuses:n,types:r}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r={autoStart:!0,keepHistory:!0,maxConcurrency:10,type:"fifo"},u=n({},r),i=function(){return u},s=function(){return u=n({},r)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).forEach(function(t){u.hasOwnProperty(t)&&(u[t]=e[t])}),u};t.getDefaults=i,t.resetDefaults=s,t.setDefaults=o,t.default={getDefaults:i,resetDefaults:s,setDefaults:o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(5),o=n(2),a=n(6),c=r(a),l=n(7),f=function(e,t){return function(n,r){r?t(r):e(n)}},p=function(e,t){return function(n){return t(e.id,e),Promise.reject(n)}},h=function(e,t){return function(n){return t(e.id,e),n}},d=function(){function e(t,n,r){u(this,e),Object.assign(this,{cancelId:null,id:t,isCancelled:!1,promiseId:null,status:o.statuses.PENDING});var i=p(this,r),s=h(this,r);this.promise=this._createPromiseWrapper(n,s,i)}return i(e,[{key:"_createPromiseWrapper",value:function(e,t,n){var r=this,u=(0,l.isFunction)(e)?e:function(t){return t(e)},i=this._getUnsubscribeOnResolve(),a=this._getUnsubscribeOnReject();return new Promise(function(e,t){var n=r._resolvePromise(e),i=r._rejectPromise(t),a=f(n,i);r.cancelId=(0,s.subscribe)(o.statuses.CANCELLED,function(e,n){var u=n.id,i=n.message;u===r.id&&(r.isCancelled=!0,r._cancelPromise(t,i))}),r.promiseId=(0,s.subscribe)(o.statuses.RUNNING,function(e,t){t===r.id&&(u(a),(0,s.unsubscribe)(r.promiseId))})}).then(i).catch(a).then(t).catch(n)}},{key:"_cancelPromise",value:function(e,t){this.status=o.statuses.CANCELLED,e(new c.default(t,o.statuses.CANCELLED))}},{key:"_publishCancellation",value:function(e){(0,s.publish)(o.statuses.CANCELLED,{id:this.id,message:e})}},{key:"_rejectPromise",value:function(e){var t=this;return function(n){t.isCancelled||(t.status=o.statuses.FAILED,e(new c.default(n)))}}},{key:"_resolvePromise",value:function(e){var t=this;return function(n){t.isCancelled||(t.status=o.statuses.COMPLETED,e(n))}}},{key:"_getUnsubscribeOnReject",value:function(){var e=this;return function(t){return(0,s.unsubscribe)(e.cancelId),Promise.reject(t)}}},{key:"_getUnsubscribeOnResolve",value:function(){var e=this;return function(t){return(0,s.unsubscribe)(e.cancelId),t}}},{key:"run",value:function(){this.status=o.statuses.RUNNING,(0,s.publish)(o.statuses.RUNNING,this.id)}}]),e}();t.default=d,e.exports=t.default},function(e,t){e.exports=void 0},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),o=function(e){function t(e){r(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(n,n.constructor):Object.defineProperty(n,"stack",{value:(new Error).stack}),Object.defineProperty(n,"message",{value:e}),n}return i(t,e),t}(Error),a=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.statuses.FAILED;return r(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Queue promise was rejected with status "+n+(e?": ":".")+e))}return i(t,e),t}(o);t.default=a,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return Object.prototype.toString.call(e)},r=function(e){return"[object Function]"===n(e)||"function"==typeof e},u=function(e){return"[object Object]"===n(e)&&!!e};t.isFunction=r,t.isObject=u,t.default={isFunction:r,isObject:u}}]);